@using System.Text
@inject NavigationManager NavigationManager

<InputFile OnChange="HandleFileChange" />

@code {
    private async Task HandleFileChange(InputFileChangeEventArgs e)
    {
        var file = e.File;
        using var stream = file.OpenReadStream();
        CsvReader.ReadTestators(stream);

        using var memoryStream = new MemoryStream();
        await stream.CopyToAsync(memoryStream);

        // Example: Process file content
        var fileContent = memoryStream.ToArray();
        var fileText = Encoding.UTF8.GetString(fileContent);
        Console.WriteLine(fileText);
        CsvReader.ReadTestators(fileText);
        await Task.Delay(500);
        foreach (var VARIABLE in TestatorRepository.testators)
        {
            Console.WriteLine(VARIABLE.Name);

        }
    }
}

